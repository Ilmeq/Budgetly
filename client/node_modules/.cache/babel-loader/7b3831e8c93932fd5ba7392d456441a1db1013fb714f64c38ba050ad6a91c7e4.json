{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\Budgetly\\\\client\\\\src\\\\components\\\\Notifications.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Notifications = () => {\n  _s();\n  const [notifications, setNotifications] = useState([]);\n  const fetchNotifications = async () => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      setNotifications([]);\n      return;\n    }\n    try {\n      const res = await fetch(\"http://localhost:5000/api/planner/progress\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) {\n        console.error(\"Failed to fetch planner progress\");\n        setNotifications([]);\n        return;\n      }\n      const progressData = await res.json();\n      const newNotifications = [];\n      Object.entries(progressData).forEach(([category, data]) => {\n        const pct = data.percentage;\n        if (pct >= 100) {\n          newNotifications.push({\n            id: `100_${category}`,\n            message: `ðŸš¨ You have spent 100% or more of your planned budget in \"${category}\"!`,\n            level: \"danger\"\n          });\n        } else if (pct >= 90) {\n          newNotifications.push({\n            id: `90_${category}`,\n            message: `âš ï¸ You have spent 90% or more of your planned budget in \"${category}\".`,\n            level: \"warning\"\n          });\n        } else if (pct >= 80) {\n          newNotifications.push({\n            id: `80_${category}`,\n            message: `ðŸ”” You have spent 80% or more of your planned budget in \"${category}\".`,\n            level: \"info\"\n          });\n        }\n      });\n      setNotifications(newNotifications);\n    } catch (error) {\n      console.error(\"Error fetching notifications\", error);\n      setNotifications([]);\n    }\n  };\n  useEffect(() => {\n    fetchNotifications();\n    const onExpenseAdded = () => {\n      fetchNotifications();\n    };\n    window.addEventListener(\"expenseAdded\", onExpenseAdded);\n    return () => {\n      window.removeEventListener(\"expenseAdded\", onExpenseAdded);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute right-0 mt-2 w-72 max-h-64 overflow-auto bg-white shadow-lg rounded border border-gray-300 z-10 p-4\",\n      children: notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 text-center\",\n        children: \"No spending alerts yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-2\",\n        children: notifications.map(({\n          id,\n          message,\n          level\n        }) => {\n          let bgColor = \"bg-blue-100 text-blue-800\";\n          if (level === \"danger\") bgColor = \"bg-red-100 text-red-800\";else if (level === \"warning\") bgColor = \"bg-yellow-100 text-yellow-800\";\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: `${bgColor} p-3 rounded-md shadow-sm font-semibold`,\n            children: message\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Notifications, \"6gMUc0OfbF4zJu51/S5RmKCczuA=\");\n_c = Notifications;\nexport default Notifications;\nvar _c;\n$RefreshReg$(_c, \"Notifications\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Notifications","_s","notifications","setNotifications","fetchNotifications","token","localStorage","getItem","res","fetch","headers","Authorization","ok","console","error","progressData","json","newNotifications","Object","entries","forEach","category","data","pct","percentage","push","id","message","level","onExpenseAdded","window","addEventListener","removeEventListener","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","bgColor","_c","$RefreshReg$"],"sources":["C:/Users/HP/Documents/Budgetly/client/src/components/Notifications.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nconst Notifications = () => {\r\n  const [notifications, setNotifications] = useState([]);\r\n\r\n  const fetchNotifications = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      setNotifications([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/planner/progress\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!res.ok) {\r\n        console.error(\"Failed to fetch planner progress\");\r\n        setNotifications([]);\r\n        return;\r\n      }\r\n\r\n      const progressData = await res.json();\r\n      const newNotifications = [];\r\n\r\n      Object.entries(progressData).forEach(([category, data]) => {\r\n        const pct = data.percentage;\r\n\r\n        if (pct >= 100) {\r\n          newNotifications.push({\r\n            id: `100_${category}`,\r\n            message: `ðŸš¨ You have spent 100% or more of your planned budget in \"${category}\"!`,\r\n            level: \"danger\",\r\n          });\r\n        } else if (pct >= 90) {\r\n          newNotifications.push({\r\n            id: `90_${category}`,\r\n            message: `âš ï¸ You have spent 90% or more of your planned budget in \"${category}\".`,\r\n            level: \"warning\",\r\n          });\r\n        } else if (pct >= 80) {\r\n          newNotifications.push({\r\n            id: `80_${category}`,\r\n            message: `ðŸ”” You have spent 80% or more of your planned budget in \"${category}\".`,\r\n            level: \"info\",\r\n          });\r\n        }\r\n      });\r\n\r\n      setNotifications(newNotifications);\r\n    } catch (error) {\r\n      console.error(\"Error fetching notifications\", error);\r\n      setNotifications([]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchNotifications();\r\n\r\n    const onExpenseAdded = () => {\r\n      fetchNotifications();\r\n    };\r\n\r\n    window.addEventListener(\"expenseAdded\", onExpenseAdded);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"expenseAdded\", onExpenseAdded);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <div className=\"absolute right-0 mt-2 w-72 max-h-64 overflow-auto bg-white shadow-lg rounded border border-gray-300 z-10 p-4\">\r\n        {notifications.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center\">No spending alerts yet.</p>\r\n        ) : (\r\n          <ul className=\"space-y-2\">\r\n            {notifications.map(({ id, message, level }) => {\r\n              let bgColor = \"bg-blue-100 text-blue-800\";\r\n              if (level === \"danger\") bgColor = \"bg-red-100 text-red-800\";\r\n              else if (level === \"warning\") bgColor = \"bg-yellow-100 text-yellow-800\";\r\n\r\n              return (\r\n                <li\r\n                  key={id}\r\n                  className={`${bgColor} p-3 rounded-md shadow-sm font-semibold`}\r\n                >\r\n                  {message}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notifications;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}