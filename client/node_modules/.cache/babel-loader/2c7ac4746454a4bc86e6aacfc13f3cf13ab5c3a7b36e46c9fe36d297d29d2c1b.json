{"ast":null,"code":"const handleSubmit = async e => {\n  e.preventDefault();\n\n  // Get token FIRST\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    alert(\"No authentication token found. Please sign in.\");\n    return;\n  }\n\n  // Validate expense date is within active planner dates\n  try {\n    const progressRes = await fetch(\"http://localhost:5000/api/planner/progress\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    if (progressRes.ok) {\n      const progressData = await progressRes.json();\n      const expenseDate = new Date(formData.date); // Now formData is in scope\n\n      // Find first category with date range (adjust based on your API response)\n      const firstCategory = Object.keys(progressData.categories)[0];\n      if (firstCategory) {\n        const plannerStart = new Date(progressData.startDate);\n        const plannerEnd = new Date(progressData.endDate);\n        if (expenseDate < plannerStart || expenseDate > plannerEnd) {\n          alert(\"Expense date is outside planner date range!\");\n          return;\n        }\n      }\n    }\n  } catch (err) {\n    console.error(\"Date validation error:\", err);\n  }\n\n  // Rest of submission logic\n  try {\n    const response = await fetch(\"http://localhost:5000/api/expenses\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(formData) // formData is defined here\n    });\n\n    // ... rest of your existing code\n  } catch (error) {\n    // ... error handling\n  }\n};","map":{"version":3,"names":["handleSubmit","e","preventDefault","token","localStorage","getItem","alert","progressRes","fetch","headers","Authorization","ok","progressData","json","expenseDate","Date","formData","date","firstCategory","Object","keys","categories","plannerStart","startDate","plannerEnd","endDate","err","console","error","response","method","body","JSON","stringify"],"sources":["C:/Users/HP/Documents/Budgetly/client/src/components/AddExpenseForm.jsx"],"sourcesContent":["const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  \r\n  // Get token FIRST\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!token) {\r\n    alert(\"No authentication token found. Please sign in.\");\r\n    return;\r\n  }\r\n\r\n  // Validate expense date is within active planner dates\r\n  try {\r\n    const progressRes = await fetch(\"http://localhost:5000/api/planner/progress\", {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    });\r\n    \r\n    if (progressRes.ok) {\r\n      const progressData = await progressRes.json();\r\n      const expenseDate = new Date(formData.date); // Now formData is in scope\r\n      \r\n      // Find first category with date range (adjust based on your API response)\r\n      const firstCategory = Object.keys(progressData.categories)[0];\r\n      if (firstCategory) {\r\n        const plannerStart = new Date(progressData.startDate);\r\n        const plannerEnd = new Date(progressData.endDate);\r\n        \r\n        if (expenseDate < plannerStart || expenseDate > plannerEnd) {\r\n          alert(\"Expense date is outside planner date range!\");\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Date validation error:\", err);\r\n  }\r\n\r\n  // Rest of submission logic\r\n  try {\r\n    const response = await fetch(\"http://localhost:5000/api/expenses\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify(formData) // formData is defined here\r\n    });\r\n    \r\n    // ... rest of your existing code\r\n  } catch (error) {\r\n    // ... error handling\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG,MAAOC,CAAC,IAAK;EAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;;EAElB;EACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACF,KAAK,EAAE;IACVG,KAAK,CAAC,gDAAgD,CAAC;IACvD;EACF;;EAEA;EACA,IAAI;IACF,MAAMC,WAAW,GAAG,MAAMC,KAAK,CAAC,4CAA4C,EAAE;MAC5EC,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUP,KAAK;MAAG;IAC9C,CAAC,CAAC;IAEF,IAAII,WAAW,CAACI,EAAE,EAAE;MAClB,MAAMC,YAAY,GAAG,MAAML,WAAW,CAACM,IAAI,CAAC,CAAC;MAC7C,MAAMC,WAAW,GAAG,IAAIC,IAAI,CAACC,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC;;MAE7C;MACA,MAAMC,aAAa,GAAGC,MAAM,CAACC,IAAI,CAACR,YAAY,CAACS,UAAU,CAAC,CAAC,CAAC,CAAC;MAC7D,IAAIH,aAAa,EAAE;QACjB,MAAMI,YAAY,GAAG,IAAIP,IAAI,CAACH,YAAY,CAACW,SAAS,CAAC;QACrD,MAAMC,UAAU,GAAG,IAAIT,IAAI,CAACH,YAAY,CAACa,OAAO,CAAC;QAEjD,IAAIX,WAAW,GAAGQ,YAAY,IAAIR,WAAW,GAAGU,UAAU,EAAE;UAC1DlB,KAAK,CAAC,6CAA6C,CAAC;UACpD;QACF;MACF;IACF;EACF,CAAC,CAAC,OAAOoB,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;EAC9C;;EAEA;EACA,IAAI;IACF,MAAMG,QAAQ,GAAG,MAAMrB,KAAK,CAAC,oCAAoC,EAAE;MACjEsB,MAAM,EAAE,MAAM;MACdrB,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCC,aAAa,EAAE,UAAUP,KAAK;MAChC,CAAC;MACD4B,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACjB,QAAQ,CAAC,CAAC;IACjC,CAAC,CAAC;;IAEF;EACF,CAAC,CAAC,OAAOY,KAAK,EAAE;IACd;EAAA;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}